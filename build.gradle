allprojects {
    apply plugin: "java"
    apply plugin: "java-library"

    sourceCompatibility = targetCompatibility = 1.8
    compileJava.options.encoding = "UTF-8"

    version = "0.0.1"
    group = "org.bookmc"

    repositories {
        maven {
            url "https://jitpack.io"
        }
        mavenCentral()
        mavenLocal()
    }

    configurations {
        include
        implementation.extendsFrom(include)
    }

    dependencies {
        compileOnly "com.github.BookMC:services:293f5877c7"
        compileOnly "com.github.BookMC:tweaker:123b4ec891"
        compileOnly "com.github.BookMC:loader:cf4eaeff3f"

        api "com.github.BookMC:LegacyLauncher:2cbe27165a"
    }

    processResources {
        inputs.files "src/main/resources"
        outputs.dir "build/classes/main"
        copy {
            from("src/main/resources")
            into("build/classes/main")
        }
    }

    jar {
        from {
            configurations.include.collect {
                it.isDirectory() ? it : zipTree(it)
            }
        }

        duplicatesStrategy DuplicatesStrategy.EXCLUDE

        exclude "META-INF/*.RSA", "META-INF/*.SF", "META-INF/*.DSA", "module-info.class"
    }
}