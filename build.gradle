plugins {
    id "com.github.johnrengelman.shadow" version "6.1.0" apply false
}

allprojects {
    apply plugin: "java"
    apply plugin: "com.github.johnrengelman.shadow"

    sourceCompatibility = targetCompatibility = 1.8
    compileJava.options.encoding = "UTF-8"

    version = "0.0.1"
    group = "org.bookmc"

    repositories {
        maven {
            url "https://jitpack.io"
        }
        mavenCentral()
    }

    configurations {
        include
        implementation.extendsFrom(include)
    }

    dependencies {
        compileOnly "com.github.BookMC:loader:b143da418e"
    }

    processResources {
        inputs.files "src/main/resources"
        outputs.dir "build/classes/main"
        copy {
            from("src/main/resources")
            into("build/classes/main")
        }
    }

    shadowJar {
        configurations = [project.configurations.include]
        duplicatesStrategy DuplicatesStrategy.EXCLUDE
        archiveClassifier.set("")

        exclude "META-INF/*.RSA", "META-INF/*.SF", "META-INF/*.DSA", "module-info.class"
    }
}