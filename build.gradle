allprojects {
    apply plugin: "java"

    sourceCompatibility = targetCompatibility = 1.8
    compileJava.options.encoding = "UTF-8"

    version = "0.0.1"
    group = "org.bookmc"

    repositories {
        maven {
            url "https://jitpack.io"
        }
        mavenCentral()
    }

    configurations {
        include
        implementation.extendsFrom(include)
    }

    dependencies {
        compileOnly "com.github.BookMC:loader:6d9d2b5b43"
    }

    processResources {
        inputs.files "src/main/resources"
        outputs.dir "build/classes/main"
        copy {
            from("src/main/resources")
            into("build/classes/main")
        }
    }

    jar {
        from {
            configurations.include.collect {
                it.isDirectory() ? it : zipTree(it)
            }
        }

        duplicatesStrategy DuplicatesStrategy.EXCLUDE
        exclude "module-info.class"
    }
}